# ===================================
# BACKEND TRANSCRIPTION SERVICE CONFIGURATION
# ===================================

# ===== WHISPER-STREAMING SERVICE CONNECTION =====
# Whisper-Streaming service WebSocket URL (no /transcription path needed)
WHISPER_SERVICE_URL=ws://127.0.0.1:8000

# Whisper-Streaming health check URL
WHISPER_HEALTH_URL=http://127.0.0.1:8001/health

# Connection timeout for Whisper-Streaming service (milliseconds) - reduced for real-time
WHISPER_CONNECTION_TIMEOUT=30000

# Maximum reconnection attempts to Whisper-Streaming service
WHISPER_MAX_RECONNECT_ATTEMPTS=3

# Reconnection delay (milliseconds)
WHISPER_RECONNECT_DELAY=2000

# ===== WEBSOCKET SERVER CONFIGURATION =====
# WebSocket server port
WS_PORT=3000

# WebSocket ping interval (milliseconds) - increased for file processing
WS_PING_INTERVAL=120000

# WebSocket connection timeout (milliseconds) - increased for file processing
WS_CONNECTION_TIMEOUT=600000

# Enable WebSocket compression (true/false)
WS_ENABLE_COMPRESSION=true

# Maximum WebSocket message size (bytes)
WS_MAX_MESSAGE_SIZE=1048576

# ===== RATE LIMITING =====
# Maximum requests per minute per client
MAX_REQUESTS_PER_MINUTE=60

# Maximum audio bytes per second per client
MAX_AUDIO_BYTES_PER_SECOND=1048576

# Maximum concurrent sessions per client
MAX_CONCURRENT_SESSIONS=10

# Rate limiter cleanup interval (milliseconds)
RATE_LIMITER_CLEANUP_INTERVAL=60000

# ===== SESSION MANAGEMENT =====
# Session timeout (milliseconds) - increased for long file processing
SESSION_TIMEOUT=600000

# Maximum session duration (milliseconds) - increased for long file processing
MAX_SESSION_DURATION=7200000

# Session cleanup interval (milliseconds)
SESSION_CLEANUP_INTERVAL=60000

# ===== AUTHENTICATION =====
# JWT secret for token validation
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# JWT token expiration time
JWT_EXPIRATION=24h

# Enable authentication (true/false) - DISABLED FOR TESTING
ENABLE_AUTHENTICATION=false

# ===== LOGGING =====
# Log level: 0=ERROR, 1=WARN, 2=INFO, 3=DEBUG
LOG_LEVEL=2

# Log directory
LOG_DIR=logs

# Enable file logging (true/false)
ENABLE_FILE_LOGGING=true

# Enable console logging (true/false)
ENABLE_CONSOLE_LOGGING=true

# Log rotation interval (daily, weekly, monthly)
LOG_ROTATION=daily

# Maximum log file size (MB)
MAX_LOG_FILE_SIZE=100

# ===== HEALTH MONITORING =====
# Health check interval (milliseconds)
HEALTH_CHECK_INTERVAL=30000

# Whisper service health check timeout (milliseconds) - increased for long processing
WHISPER_HEALTH_CHECK_TIMEOUT=30000

# Maximum error rate threshold (0.0 to 1.0)
MAX_ERROR_RATE_THRESHOLD=0.1

# Latency threshold for degraded status (milliseconds)
LATENCY_THRESHOLD_MS=5000

# Enable health monitoring (true/false)
ENABLE_HEALTH_MONITORING=true

# ===== OUTPUT CONFIGURATION =====
# Transcription output directory
TRANSCRIPTION_OUTPUT_DIR=transcriptions

# Enable transcription saving (true/false)
ENABLE_TRANSCRIPTION_SAVING=true

# Transcription file format (json, txt, csv)
TRANSCRIPTION_FILE_FORMAT=json

# Include metadata in transcription files (true/false)
INCLUDE_TRANSCRIPTION_METADATA=true

# ===== AUDIO PROCESSING =====
# Audio chunk size for processing (bytes)
AUDIO_CHUNK_SIZE=4096

# Audio buffer size (bytes)
AUDIO_BUFFER_SIZE=32768

# Maximum audio file size for upload (MB)
MAX_AUDIO_FILE_SIZE_MB=50

# Supported audio formats (comma-separated)
SUPPORTED_AUDIO_FORMATS=wav,mp3,m4a,ogg,webm

# ===== PERFORMANCE =====
# Enable performance metrics collection (true/false)
ENABLE_PERFORMANCE_METRICS=true

# Metrics collection interval (milliseconds)
METRICS_COLLECTION_INTERVAL=10000

# Enable memory usage monitoring (true/false)
ENABLE_MEMORY_MONITORING=true

# Memory usage threshold for warnings (MB)
MEMORY_WARNING_THRESHOLD_MB=512

# ===== CORS CONFIGURATION =====
# Allowed origins for CORS (comma-separated or * for all)
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# Enable CORS credentials (true/false)
CORS_ALLOW_CREDENTIALS=true

# ===== DEVELOPMENT/TESTING =====
# Enable debug mode (true/false)
DEBUG_MODE=false

# Enable request/response logging (true/false)
ENABLE_REQUEST_LOGGING=false

# Enable WebSocket message logging (true/false)
ENABLE_WS_MESSAGE_LOGGING=false

# Mock Whisper service for testing (true/false)
MOCK_WHISPER_SERVICE=false

# Test mode - reduces timeouts and limits (true/false)
TEST_MODE=false
